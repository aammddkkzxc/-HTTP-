프로토콜 : 통신을 위한 규칙	
애플리케이션 : 데이터를 주고받는 주체가 된다 (주로)

복잡한 인터넷망에서 데이터를 보내려면 최소한의 규칙이 있어야 한다 -> IP주소

### IP(인터넷 프로토콜)

- IP 주소를 부여받아야 한다. (클라이언트와 서버 모두)
- IP의 역할
    - 지정한 IP 주소에 데이터 전달
    - 패킷이라는 단위로 데이터 전달
- IP 패킷 정보
    - 출발지 IP, 목적지 IP, 데이터 등등등
    - 송신자의 출발지 IP와 수신자의 목적지 IP를 넣어 주고 인터넷 망에 넘겨주면 노드를 거쳐서 서버까지 전달됨
    - 잘 받았으면 수신자가 송신자에게 잘 받았다고 메시지 전달

### IP 프로토콜의 한계

- 비연결성
    - 패킷을 받을 대상이 없거나 서비스가 불능 상태여도 패킷이 전송된다.
    - 클라이언트는 대상 서버가 패킷을 받을 수 있는 상태인지 모른다.
- 비신뢰성
    - 중간 서버가 꺼질 경우 패킷이 유실될 가능성이 있
    - 순차적 패킷 전송이 보장되지 않음
        - 패킷이 큰 경우 1500바이트씩 정도씩 끊어서 전송
        - a를 보내고, b를 보내는 경우 이동하는 노드 경로가 다를 수 있음
        - 의도와 다른 순서대로 도착할 수 있
        - IP 프로토콜만으로는 이를 해결할 수 없음.
- 프로그램 구분
    - 인터넷을 하면서 음악을 하는 등 같은 IP에서 여러개의 애플리케이션 동작시 구분이 안됨

### 인터넷 프로토콜 스택의 4계층
애플리케이션층 : 애플리케이션에서 다룰 데이터 형식과 절차를 결정한다. HTTP, SMTP, FTP, DNS
트랜스포트층 : 통신 노드 간의 연결을 제어하고 신뢰성 있는 데이터 전송을 담당한다. TCP/UDP
인터넷층 : 통신 노드 간의 IP 패킷을 전송하며 라우팅을 담당한다. 엔드투엔드 통신을 한다. IP
네트워크 인터페이스층 : 네트워크 안에서 데이터를 전송한다. 물리적인 주소로 MAC을 사용한다.

예시) 
채팅 프로그램으로 저 미국에 있는 친구한테 hello world 라는 메시지를 전송 
->  소켓 라이브러리라는 걸 보통 씀 
-> 소켓 라이브러리를 통해서 os 계층에다가 hello 라는 메시지를 넘김 
-> os 계층에서 tcp가 hello 라는 메시지에다가 tcp 정보를 씌움 
-> tcp 정보밖에다가 또 ip와 관련된 데이터들을 씌움. 이렇게 ip 패킷이 생성. 이 IP 패킷은 결국 IP와 관련된 정보가 있고 그 안에 또 TCP와 관련된 정보가 있고그 안에 실제 내가 만들었던 메시지가 있다. 
-> 그리고 이게 진짜 네트워크 인터페이스를 통해서 랜카드를 통해서 나갈 때 이 이더넷프레임이라는 게 이게 포함이 돼서 나감.

IP 정보 => 출발지 IP, 목적지 IP
TCP 정보 => 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증정보

### TCP 특징

- 연결지향
    - TCP 3-way handshake (가상 연결)
    - 연결을 한 다음 메세지를 보내기 때문에 상대방 컴퓨터가 꺼져있는지 확인할 수 있음
- 데이터 전달 보증
    - 패킷을 보냈을 때 중간에 누락되었는지 여부를 알 수 있음
- 순서 보장
- 신뢰할 수 있는 프로토콜
- 대부분의 애플리케이션에서 TCP 사용

- 3-way handshake
1. SYNC -> 2. SYNC + ACK -> 3. ACK -> 데이터 전송(최근에는 3번 과정과 함께 일어나도록 최적화)	
- SYN은 접속 요청을 의미한다.
- ACK는 요청 수락을 의미한다.
- 위 연결은 물리적인 연결이 아닌 논리적 연결, 즉 가상 연결이다. 3-way 과정후에 클라이언트와 서버가 연결이 됐나보다~ 하는것 실제로 
- 물리적인 연결이란 예시로 진짜 전화포트를 옆에 포트 꼽아주는 것처럼 직접 연결 한다는 의미


### UDP

- 기능이 거의 없음
- 연결지향 X
- 데이터 전달 보증 X
- 순서 보장 X
- 데이터 전달 및 순서가 보장되지 않지만 단순하고 빠름
- IP와 거의 같지만 Port와 체크섬(메시지가 제대로 왔는지 검증) 정도만 추가
    - Port로 인해 하나의 IP에서 여러개의 패킷이 올 때 작업 구분 가능
    - 게임, 음악을 동시에 할때 서로 다른 포트 사용
- 애플리케이션에서의 추가 작업 필요

### UDP의 장점

- TCP에 비해 전송 속도가 빠르며 최적화를 할 수가 있다.
    - TCP 프로토콜은 손을 댈 수가 없음.
- TCP는 그대로 사용하고, UDP는 내가 원하는 대로 어플리케이션 레벨에서 만들어 주면 된다.
- http3같은 경우에는 UDP를 사용하여 각광받고 있음.

### Port

- 한번에 둘 이상 연결해야 한다면?
    - 게임, 화상통화, 웹 브라우저 요청 등등등. 하나의 클라이언트가 여러개의 서버와 통신해야 한다.
	- IP는 목적지 서버를 찾는 목적이다. PORT는 목적지 서버에서 애플리케이션을 구분하기 위한 용도이다
	- 같은 IP 내 에서 프로세스를 구분하기 위한 용도이다.
	- 출발지 IP,PORT / 목적지 IP,PORT 모두 한 패킷에 정보가 들있다.
- 0~65535 할당 가능
    - 0~1023: 잘 알려진 포트, 사용하지 않는 것이 좋음
    - FTP는 20, 21
    - TELNET은 23
    - HTTP는 80
    - HTTPS는 443

### DNS
- IP는 단순히 숫자의 조합으로 이루어져 있다. 즉 사람이 기억하기 어려운 형태를 가지고 있다. 또한 IP는 변경될 가능성을 내포하고 있다.
- 이때 도메인 명을 적절한 IP 주소로 변환해주는 역할을 담당하는 것은 DNS(Domain Name Server)이다.
- DNS는 누가 운영하는가? 주로 회사나 기관이 운영한다. ex) google, cloudflare 등
